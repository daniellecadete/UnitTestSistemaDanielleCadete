node {
    stage('Build') {
      node() {
        echo 'Master'
        //sh 'hostname'
        //sh "sudo chown -R jenkins: ${WORKSPACE}"
        deleteDir()
        checkout scm
        sh 'echo "res" > result'
        stash includes: '**/result', name: 'app'
        
      }
     }  
      
    stage("Test") {
      node('slave') {
        echo 'Slave'
        //sh 'hostname'
        
        unstash 'app'
        sh 'cat result'
        archiveArtifacts artifacts: '**/result', fingerprint: true
        //sh "sudo docker run -v /home/dani/devops/exercicio3/srv/jenkins/workspace/${JOB_NAME}:/workspace -w /workspace maven:latest mvn install"
      }
    }     
}
